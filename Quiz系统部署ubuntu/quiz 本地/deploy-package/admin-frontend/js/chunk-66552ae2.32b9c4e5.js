(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66552ae2"],{"40b3":function(t,e,i){"use strict";i("5631")},5631:function(t,e,i){},e254:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"question-container"},[t._m(0),e("el-form",{staticClass:"search-form",attrs:{inline:!0,model:t.searchForm}},[e("el-form-item",[e("el-input",{attrs:{placeholder:"请输入题目关键词"},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.searchQuestions}},[t._v("搜索")]),e("el-button",{attrs:{type:"success"},on:{click:t.openAddDialog}},[t._v("添加题目")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.questionList}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"question",label:"题目内容","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.editQuestion(i.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.confirmDelete(i.row)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pagination,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pagination,"currentPage",e)}}})],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"questionForm",attrs:{model:t.questionForm,rules:t.questionRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"题目内容",prop:"question"}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入题目内容"},model:{value:t.questionForm.question,callback:function(e){t.$set(t.questionForm,"question",e)},expression:"questionForm.question"}})],1),e("el-divider",{attrs:{"content-position":"left"}},[t._v("选项")]),t._l(t.questionForm.answers,(function(i,s){return e("div",{key:s,staticClass:"option-item"},[e("el-form-item",{attrs:{label:"选项 "+(s+1),prop:"answers."+s+".text",rules:[{required:!0,message:"请输入选项内容",trigger:"blur"}]}},[e("div",{staticClass:"option-row"},[e("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:i.text,callback:function(e){t.$set(i,"text",e)},expression:"option.text"}}),e("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:i.correct,callback:function(e){t.$set(i,"correct",e)},expression:"option.correct"}},[t._v("正确答案")]),t.questionForm.answers.length>2?e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.removeOption(s)}}}):t._e()],1)])],1)})),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addOption}},[t._v("添加选项")])],1)],2),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitQuestion}},[t._v("确 定")])],1)],1)],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h2",[t._v("题目管理")])])}],n={name:"Question",data(){return{questionList:[],loading:!1,pagination:{currentPage:1,pageSize:10,total:0},searchForm:{keyword:""},dialogVisible:!1,dialogTitle:"添加题目",submitLoading:!1,isEdit:!1,questionForm:{id:null,question:"",answers:[{text:"",correct:!1},{text:"",correct:!1},{text:"",correct:!1},{text:"",correct:!1}]},questionRules:{question:[{required:!0,message:"请输入题目内容",trigger:"blur"}]}}},created(){this.fetchQuestionList()},methods:{fetchQuestionList(){this.loading=!0;const t={page:this.pagination.currentPage,pageSize:this.pagination.pageSize,keyword:this.searchForm.keyword};this.$axios.get("/question/list",{params:t}).then(t=>{const e=t.data;1===e.code?(this.questionList=e.data.records||e.data.list||e.data,this.pagination.total=e.data.total||this.questionList.length):this.$message.error(e.msg||"获取题目列表失败"),this.loading=!1}).catch(t=>{console.error(t),this.$message.error("获取题目列表失败"),this.loading=!1})},searchQuestions(){this.pagination.currentPage=1,this.fetchQuestionList()},handleSizeChange(t){this.pagination.pageSize=t,this.fetchQuestionList()},handleCurrentChange(t){this.pagination.currentPage=t,this.fetchQuestionList()},openAddDialog(){this.isEdit=!1,this.dialogTitle="添加题目",this.questionForm={id:null,question:"",answers:[{text:"",correct:!1},{text:"",correct:!1},{text:"",correct:!1},{text:"",correct:!1}]},this.dialogVisible=!0,this.$refs.questionForm&&this.$nextTick(()=>{this.$refs.questionForm.clearValidate()})},editQuestion(t){this.isEdit=!0,this.dialogTitle="编辑题目",this.$axios.get("/question/detail/"+t.id).then(t=>{const e=t.data;if(1===e.code){this.questionForm={id:e.data.id,question:e.data.question,answers:[...e.data.answers]};while(this.questionForm.answers.length<4)this.questionForm.answers.push({text:"",correct:!1});this.dialogVisible=!0}else this.$message.error(e.msg||"获取题目详情失败")}).catch(t=>{console.error(t),this.$message.error("获取题目详情失败")})},addOption(){this.questionForm.answers.push({text:"",correct:!1})},removeOption(t){this.questionForm.answers.splice(t,1)},submitQuestion(){this.$refs.questionForm.validate(t=>{if(t){const t=this.questionForm.answers.some(t=>t.correct);if(!t)return void this.$message.warning("至少需要选择一个正确答案");if(this.questionForm.answers=this.questionForm.answers.filter(t=>""!==t.text.trim()),this.questionForm.answers.length<2)return void this.$message.warning("至少需要两个选项");this.submitLoading=!0;const e=this.isEdit?"/question/update":"/question/add";this.$axios.post(e,this.questionForm).then(t=>{const e=t.data;1===e.code?(this.$message.success(this.isEdit?"修改题目成功":"添加题目成功"),this.dialogVisible=!1,this.fetchQuestionList()):this.$message.error(e.msg||(this.isEdit?"修改题目失败":"添加题目失败")),this.submitLoading=!1}).catch(t=>{console.error(t),this.$message.error(this.isEdit?"修改题目失败":"添加题目失败"),this.submitLoading=!1})}})},confirmDelete(t){this.$confirm("确定要删除该题目吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteQuestion(t.id)}).catch(()=>{})},deleteQuestion(t){this.$axios.delete("/question/delete/"+t).then(t=>{const e=t.data;1===e.code?(this.$message.success("删除题目成功"),this.fetchQuestionList()):this.$message.error(e.msg||"删除题目失败")}).catch(t=>{console.error(t),this.$message.error("删除题目失败")})}}},r=n,a=(i("40b3"),i("2877")),l=Object(a["a"])(r,s,o,!1,null,"7b2a14b4",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-66552ae2.32b9c4e5.js.map