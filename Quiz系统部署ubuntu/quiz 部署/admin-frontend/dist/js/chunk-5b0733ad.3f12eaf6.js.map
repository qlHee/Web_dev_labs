{"version":3,"sources":["webpack:///./src/views/User.vue","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?0f50","webpack:///./src/views/User.vue?7685","webpack:///./src/views/User.vue?c344"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","searchForm","model","value","keyword","callback","$$v","$set","expression","on","searchUsers","_v","openAddDialog","directives","name","rawName","loading","staticStyle","userList","scopedSlots","_u","key","fn","scope","row","userRole","_s","$event","openEditDialog","resetUserPassword","confirmDelete","pagination","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","addDialogVisible","ref","addForm","addFormRules","username","password","checkpassword","userrole","slot","addLoading","addUser","editDialogVisible","editForm","editFormRules","userName","editLoading","saveEditUser","staticRenderFns","data","validateConfirmPassword","rule","Error","required","message","trigger","min","max","validator","id","created","fetchUserList","methods","params","page","$axios","get","then","response","res","code","records","list","length","$message","error","msg","catch","console","val","$refs","clearValidate","validate","valid","post","success","$confirm","confirmButtonText","cancelButtonText","type","deleteUser","delete","$nextTick","component"],"mappings":"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","file":"js/chunk-5b0733ad.3f12eaf6.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-container\"},[_vm._m(0),_c('el-form',{staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名关键词\"},model:{value:(_vm.searchForm.keyword),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyword\", $$v)},expression:\"searchForm.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchUsers}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.openAddDialog}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\"}}),_c('el-table-column',{attrs:{\"label\":\"用户类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.userRole === 1 ? 'danger' : 'info'}},[_vm._v(\" \"+_vm._s(scope.row.userRole === 1 ? '管理员' : '普通用户')+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"320\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openEditDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":scope.row.userRole === 1},on:{\"click\":function($event){return _vm.resetUserPassword(scope.row)}}},[_vm._v(\"重置密码\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"disabled\":scope.row.userRole === 1},on:{\"click\":function($event){return _vm.confirmDelete(scope.row)}}},[_vm._v(\"删除用户\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pagination.currentPage,\"page-sizes\":[5, 10, 20, 50],\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.pagination, \"currentPage\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pagination, \"currentPage\", $event)}}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"checkpassword\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请确认密码\"},model:{value:(_vm.addForm.checkpassword),callback:function ($$v) {_vm.$set(_vm.addForm, \"checkpassword\", $$v)},expression:\"addForm.checkpassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户类型\",\"prop\":\"userrole\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择用户类型\"},model:{value:(_vm.addForm.userrole),callback:function ($$v) {_vm.$set(_vm.addForm, \"userrole\", $$v)},expression:\"addForm.userrole\"}},[_c('el-option',{attrs:{\"label\":\"普通用户\",\"value\":\"0\"}}),_c('el-option',{attrs:{\"label\":\"管理员\",\"value\":\"1\"}})],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.addLoading},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑用户\",\"visible\":_vm.editDialogVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.editForm.userName),callback:function ($$v) {_vm.$set(_vm.editForm, \"userName\", $$v)},expression:\"editForm.userName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"留空则不修改密码\"},model:{value:(_vm.editForm.password),callback:function ($$v) {_vm.$set(_vm.editForm, \"password\", $$v)},expression:\"editForm.password\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.editLoading},on:{\"click\":_vm.saveEditUser}},[_vm._v(\"保 存\")])],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h2',[_vm._v(\"用户管理\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-container\">\n    <div class=\"page-header\">\n      <h2>用户管理</h2>\n    </div>\n    \n    <!-- 搜索区域 -->\n    <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n      <el-form-item>\n        <el-input v-model=\"searchForm.keyword\" placeholder=\"请输入用户名关键词\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"searchUsers\">搜索</el-button>\n        <el-button type=\"success\" @click=\"openAddDialog\">添加用户</el-button>\n      </el-form-item>\n    </el-form>\n    \n    <!-- 用户表格 -->\n    <el-table :data=\"userList\" style=\"width: 100%\" v-loading=\"loading\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n      <el-table-column prop=\"userName\" label=\"用户名\"></el-table-column>\n      <el-table-column label=\"用户类型\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"scope.row.userRole === 1 ? 'danger' : 'info'\">\n            {{ scope.row.userRole === 1 ? '管理员' : '普通用户' }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"320\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"openEditDialog(scope.row)\">编辑</el-button>\n          <el-button size=\"mini\" @click=\"resetUserPassword(scope.row)\" :disabled=\"scope.row.userRole === 1\">重置密码</el-button>\n          <el-button size=\"mini\" type=\"danger\" @click=\"confirmDelete(scope.row)\" :disabled=\"scope.row.userRole === 1\">删除用户</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    \n    <!-- 分页 -->\n    <div class=\"pagination-container\">\n      <el-pagination\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"pagination.currentPage\"\n        :page-sizes=\"[5, 10, 20, 50]\"\n        :page-size=\"pagination.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagination.total\">\n      </el-pagination>\n    </div>\n    \n    <!-- 添加用户对话框 -->\n    <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" width=\"40%\">\n      <el-form ref=\"addForm\" :model=\"addForm\" :rules=\"addFormRules\" label-width=\"100px\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"addForm.username\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"addForm.password\" type=\"password\" placeholder=\"请输入密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"checkpassword\">\n          <el-input v-model=\"addForm.checkpassword\" type=\"password\" placeholder=\"请确认密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户类型\" prop=\"userrole\">\n          <el-select v-model=\"addForm.userrole\" placeholder=\"请选择用户类型\">\n            <el-option label=\"普通用户\" value=\"0\"></el-option>\n            <el-option label=\"管理员\" value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addUser\" :loading=\"addLoading\">确 定</el-button>\n      </div>\n    </el-dialog>\n    \n    <!-- 编辑用户对话框 -->\n    <el-dialog title=\"编辑用户\" :visible.sync=\"editDialogVisible\" width=\"40%\">\n      <el-form ref=\"editForm\" :model=\"editForm\" :rules=\"editFormRules\" label-width=\"100px\">\n        <el-form-item label=\"用户名\" prop=\"userName\">\n          <el-input v-model=\"editForm.userName\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"editForm.password\" type=\"password\" placeholder=\"留空则不修改密码\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveEditUser\" :loading=\"editLoading\">保 存</el-button>\n      </div>\n    </el-dialog>\n    \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'User',\n  data() {\n    // 自定义验证器：确认密码验证\n    const validateConfirmPassword = (rule, value, callback) => {\n      if (value !== this.addForm.password) {\n        callback(new Error('两次输入的密码不一致'));\n      } else {\n        callback();\n      }\n    };\n    \n    return {\n      // 用户列表\n      userList: [],\n      loading: false,\n      \n      // 分页\n      pagination: {\n        currentPage: 1,\n        pageSize: 5,\n        total: 0\n      },\n      \n      // 搜索\n      searchForm: {\n        keyword: ''\n      },\n      \n      // 添加用户\n      addDialogVisible: false,\n      addLoading: false,\n      addForm: {\n        username: '',\n        password: '',\n        checkpassword: '',\n        userrole: '0'\n      },\n      addFormRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ],\n        checkpassword: [\n          { required: true, message: '请确认密码', trigger: 'blur' },\n          { validator: validateConfirmPassword, trigger: 'blur' }\n        ],\n        userrole: [\n          { required: true, message: '请选择用户类型', trigger: 'change' }\n        ]\n      },\n      \n      // 编辑用户\n      editDialogVisible: false,\n      editLoading: false,\n      editForm: {\n        id: null,\n        userName: '',\n        password: ''\n      },\n      editFormRules: {\n        userName: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  created() {\n    this.fetchUserList();\n  },\n  methods: {\n    // 获取用户列表\n    fetchUserList() {\n      this.loading = true;\n      const params = {\n        page: this.pagination.currentPage,\n        pageSize: this.pagination.pageSize,\n        keyword: this.searchForm.keyword\n      };\n      \n      this.$axios.get('/user/list', { params })\n        .then(response => {\n          const res = response.data;\n          if (res.code === 1) {\n            this.userList = res.data.records || res.data.list || res.data;\n            this.pagination.total = res.data.total || this.userList.length;\n          } else {\n            this.$message.error(res.msg || '获取用户列表失败');\n          }\n          this.loading = false;\n        })\n        .catch(error => {\n          console.error(error);\n          this.$message.error('获取用户列表失败');\n          this.loading = false;\n        });\n    },\n    \n    // 搜索用户\n    searchUsers() {\n      this.pagination.currentPage = 1;\n      this.fetchUserList();\n    },\n    \n    // 分页大小改变\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.fetchUserList();\n    },\n    \n    // 当前页改变\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.fetchUserList();\n    },\n    \n    // 打开添加用户对话框\n    openAddDialog() {\n      this.addForm = {\n        username: '',\n        password: '',\n        checkpassword: '',\n        userrole: '0'\n      };\n      this.addDialogVisible = true;\n      // 重置表单验证\n      if (this.$refs.addForm) {\n        this.$refs.addForm.clearValidate();\n      }\n    },\n    \n    // 添加用户\n    addUser() {\n      this.$refs.addForm.validate(valid => {\n        if (valid) {\n          this.addLoading = true;\n          this.$axios.post('/addUser', this.addForm)\n            .then(response => {\n              const res = response.data;\n              if (res.code === 1) {\n                this.$message.success('添加用户成功');\n                this.addDialogVisible = false;\n                this.fetchUserList();\n              } else {\n                this.$message.error(res.msg || '添加用户失败');\n              }\n              this.addLoading = false;\n            })\n            .catch(error => {\n              console.error(error);\n              this.$message.error('添加用户失败');\n              this.addLoading = false;\n            });\n        }\n      });\n    },\n    \n    // 重置用户密码\n    resetUserPassword(row) {\n      this.$confirm('确定要重置该用户的密码吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$axios.post('/user/resetPassword', { id: row.id })\n          .then(response => {\n            const res = response.data;\n            if (res.code === 1) {\n              this.$message.success('密码重置成功，新密码为: 123456');\n            } else {\n              this.$message.error(res.msg || '密码重置失败');\n            }\n          })\n          .catch(error => {\n            console.error(error);\n            this.$message.error('密码重置失败');\n          });\n      }).catch(() => {});\n    },\n    \n    // 确认删除用户\n    confirmDelete(row) {\n      this.$confirm('确定要删除该用户吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteUser(row.id);\n      }).catch(() => {});\n    },\n    \n    // 删除用户\n    deleteUser(id) {\n      this.$axios.delete(`/user/delete/${id}`)\n        .then(response => {\n          const res = response.data;\n          if (res.code === 1) {\n            this.$message.success('删除用户成功');\n            this.fetchUserList();\n          } else {\n            this.$message.error(res.msg || '删除用户失败');\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          this.$message.error('删除用户失败');\n        });\n    },\n    \n    // 打开编辑用户对话框\n    openEditDialog(row) {\n      this.editForm = {\n        id: row.id,\n        userName: row.userName,\n        password: ''\n      };\n      this.editDialogVisible = true;\n      if (this.$refs.editForm) {\n        this.$nextTick(() => {\n          this.$refs.editForm.clearValidate();\n        });\n      }\n    },\n    \n    // 保存编辑用户\n    saveEditUser() {\n      this.$refs.editForm.validate(valid => {\n        if (valid) {\n          this.editLoading = true;\n          this.$axios.post('/user/update', this.editForm)\n            .then(response => {\n              const res = response.data;\n              if (res.code === 1) {\n                this.$message.success('用户更新成功');\n                this.editDialogVisible = false;\n                this.fetchUserList();\n              } else {\n                this.$message.error(res.msg || '用户更新失败');\n              }\n              this.editLoading = false;\n            })\n            .catch(error => {\n              console.error(error);\n              this.$message.error('用户更新失败');\n              this.editLoading = false;\n            });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.user-container {\n  padding: 20px;\n}\n\n.page-header {\n  margin-bottom: 20px;\n}\n\n.search-form {\n  margin-bottom: 20px;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=326aab50&scoped=true\"\nimport script from \"./User.vue?vue&type=script&lang=js\"\nexport * from \"./User.vue?vue&type=script&lang=js\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=326aab50&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"326aab50\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=326aab50&prod&scoped=true&lang=css\""],"sourceRoot":""}