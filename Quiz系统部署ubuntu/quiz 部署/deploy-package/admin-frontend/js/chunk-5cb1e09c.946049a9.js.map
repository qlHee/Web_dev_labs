{"version":3,"sources":["webpack:///./src/views/Question.vue?479b","webpack:///./src/views/Question.vue","webpack:///src/views/Question.vue","webpack:///./src/views/Question.vue?47c2","webpack:///./src/views/Question.vue?c208"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","searchForm","model","value","keyword","callback","$$v","$set","expression","on","searchQuestions","_v","openAddDialog","directives","name","rawName","loading","staticStyle","questionList","scopedSlots","_u","key","fn","scope","row","answers","length","_l","answer","index","_s","String","fromCharCode","text","map","a","i","correct","filter","x","join","$event","editQuestion","confirmDelete","pagination","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","dialogTitle","dialogVisible","ref","questionForm","questionRules","question","option","required","message","trigger","correctAnswerIndex","removeOption","_e","addOption","slot","submitLoading","submitQuestion","staticRenderFns","data","isEdit","id","created","fetchQuestionList","methods","params","page","$axios","get","then","response","res","code","records","list","$message","error","msg","catch","console","val","$refs","$nextTick","clearValidate","findIndex","push","splice","validate","valid","warning","forEach","filteredAnswers","trim","correctInFiltered","some","url","post","success","$confirm","confirmButtonText","cancelButtonText","type","deleteQuestion","delete","component"],"mappings":"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","file":"js/chunk-5cb1e09c.946049a9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Question.vue?vue&type=style&index=0&id=57b86a95&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"question-container\"},[_vm._m(0),_c('el-form',{staticClass:\"search-form\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"请输入题目关键词\"},model:{value:(_vm.searchForm.keyword),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyword\", $$v)},expression:\"searchForm.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchQuestions}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.openAddDialog}},[_vm._v(\"添加题目\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.questionList}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"question\",\"label\":\"题目内容\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"所有选项\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.answers && scope.row.answers.length)?_c('div',_vm._l((scope.row.answers),function(answer,index){return _c('span',{key:index,staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(\" \"+_vm._s(String.fromCharCode(65 + index))+\". \"+_vm._s(answer.text)+\" \")])}),0):_c('span',[_vm._v(\"-\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"正确选项\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.answers && scope.row.answers.length)?_c('span',[_vm._v(\" \"+_vm._s(scope.row.answers.map((a, i) => a.correct ? String.fromCharCode(65 + i) : '').filter(x => x).join(', ') || '-')+\" \")]):_c('span',[_vm._v(\"-\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editQuestion(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.confirmDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pagination.currentPage,\"page-sizes\":[5, 10, 20, 50],\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.pagination, \"currentPage\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.pagination, \"currentPage\", $event)}}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogVisible,\"width\":\"60%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"questionForm\",attrs:{\"model\":_vm.questionForm,\"rules\":_vm.questionRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"题目内容\",\"prop\":\"question\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入题目内容\"},model:{value:(_vm.questionForm.question),callback:function ($$v) {_vm.$set(_vm.questionForm, \"question\", $$v)},expression:\"questionForm.question\"}})],1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"选项\")]),_vm._l((_vm.questionForm.answers),function(option,index){return _c('div',{key:index,staticClass:\"option-item\"},[_c('el-form-item',{attrs:{\"label\":'选项 ' + (index + 1),\"prop\":'answers.' + index + '.text',\"rules\":[\n          { required: true, message: '请输入选项内容', trigger: 'blur' }\n        ]}},[_c('div',{staticClass:\"option-row\"},[_c('el-input',{attrs:{\"placeholder\":\"请输入选项内容\"},model:{value:(option.text),callback:function ($$v) {_vm.$set(option, \"text\", $$v)},expression:\"option.text\"}}),_c('el-radio',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"label\":index},model:{value:(_vm.correctAnswerIndex),callback:function ($$v) {_vm.correctAnswerIndex=$$v},expression:\"correctAnswerIndex\"}},[_vm._v(\"正确答案\")]),(_vm.questionForm.answers.length > 2)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeOption(index)}}}):_vm._e()],1)])],1)}),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addOption}},[_vm._v(\"添加选项\")])],1)],2),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.submitLoading},on:{\"click\":_vm.submitQuestion}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h2',[_vm._v(\"题目管理\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"question-container\">\n    <div class=\"page-header\">\n      <h2>题目管理</h2>\n    </div>\n    \n    <!-- 搜索区域 -->\n    <el-form :inline=\"true\" :model=\"searchForm\" class=\"search-form\">\n      <el-form-item>\n        <el-input v-model=\"searchForm.keyword\" placeholder=\"请输入题目关键词\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"searchQuestions\">搜索</el-button>\n        <el-button type=\"success\" @click=\"openAddDialog\">添加题目</el-button>\n      </el-form-item>\n    </el-form>\n    \n    <!-- 题目表格 -->\n    <el-table :data=\"questionList\" style=\"width: 100%\" v-loading=\"loading\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n      <el-table-column prop=\"question\" label=\"题目内容\" show-overflow-tooltip></el-table-column>\n      <el-table-column label=\"所有选项\" min-width=\"200\">\n        <template slot-scope=\"scope\">\n          <div v-if=\"scope.row.answers && scope.row.answers.length\">\n            <span v-for=\"(answer, index) in scope.row.answers\" :key=\"index\" style=\"margin-right: 10px;\">\n              {{ String.fromCharCode(65 + index) }}. {{ answer.text }}\n            </span>\n          </div>\n          <span v-else>-</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"正确选项\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.answers && scope.row.answers.length\">\n            {{ scope.row.answers.map((a, i) => a.correct ? String.fromCharCode(65 + i) : '').filter(x => x).join(', ') || '-' }}\n          </span>\n          <span v-else>-</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"editQuestion(scope.row)\">编辑</el-button>\n          <el-button size=\"mini\" type=\"danger\" @click=\"confirmDelete(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    \n    <!-- 分页 -->\n    <div class=\"pagination-container\">\n      <el-pagination\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"pagination.currentPage\"\n        :page-sizes=\"[5, 10, 20, 50]\"\n        :page-size=\"pagination.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagination.total\">\n      </el-pagination>\n    </div>\n    \n    <!-- 添加/编辑题目对话框 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"60%\">\n      <el-form ref=\"questionForm\" :model=\"questionForm\" :rules=\"questionRules\" label-width=\"100px\">\n        <el-form-item label=\"题目内容\" prop=\"question\">\n          <el-input v-model=\"questionForm.question\" type=\"textarea\" :rows=\"4\" placeholder=\"请输入题目内容\"></el-input>\n        </el-form-item>\n        \n        <el-divider content-position=\"left\">选项</el-divider>\n        \n        <div v-for=\"(option, index) in questionForm.answers\" :key=\"index\" class=\"option-item\">\n          <el-form-item :label=\"'选项 ' + (index + 1)\" :prop=\"'answers.' + index + '.text'\" :rules=\"[\n            { required: true, message: '请输入选项内容', trigger: 'blur' }\n          ]\">\n            <div class=\"option-row\">\n              <el-input v-model=\"option.text\" placeholder=\"请输入选项内容\"></el-input>\n              <el-radio :label=\"index\" v-model=\"correctAnswerIndex\" style=\"margin-left: 10px;\">正确答案</el-radio>\n              <el-button v-if=\"questionForm.answers.length > 2\" type=\"danger\" icon=\"el-icon-delete\" circle size=\"mini\" @click=\"removeOption(index)\" style=\"margin-left: 10px;\"></el-button>\n            </div>\n          </el-form-item>\n        </div>\n        \n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addOption\" icon=\"el-icon-plus\">添加选项</el-button>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitQuestion\" :loading=\"submitLoading\">确 定</el-button>\n      </div>\n    </el-dialog>\n    \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Question',\n  data() {\n    return {\n      // 题目列表\n      questionList: [],\n      loading: false,\n      \n      // 分页\n      pagination: {\n        currentPage: 1,\n        pageSize: 5,\n        total: 0\n      },\n      \n      // 搜索\n      searchForm: {\n        keyword: ''\n      },\n      \n      // 对话框\n      dialogVisible: false,\n      dialogTitle: '添加题目',\n      submitLoading: false,\n      isEdit: false,\n      \n      // 题目表单\n      questionForm: {\n        id: null,\n        question: '',\n        answers: [\n          { text: '', correct: false },\n          { text: '', correct: false },\n          { text: '', correct: false },\n          { text: '', correct: false }\n        ]\n      },\n      correctAnswerIndex: -1,\n      questionRules: {\n        question: [\n          { required: true, message: '请输入题目内容', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  created() {\n    this.fetchQuestionList();\n  },\n  methods: {\n    // 获取题目列表\n    fetchQuestionList() {\n      this.loading = true;\n      const params = {\n        page: this.pagination.currentPage,\n        pageSize: this.pagination.pageSize,\n        keyword: this.searchForm.keyword\n      };\n      \n      this.$axios.get('/question/list', { params })\n        .then(response => {\n          const res = response.data;\n          if (res.code === 1) {\n            this.questionList = res.data.records || res.data.list || res.data;\n            this.pagination.total = res.data.total || this.questionList.length;\n          } else {\n            this.$message.error(res.msg || '获取题目列表失败');\n          }\n          this.loading = false;\n        })\n        .catch(error => {\n          console.error(error);\n          this.$message.error('获取题目列表失败');\n          this.loading = false;\n        });\n    },\n    \n    // 搜索题目\n    searchQuestions() {\n      this.pagination.currentPage = 1;\n      this.fetchQuestionList();\n    },\n    \n    // 分页大小改变\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.fetchQuestionList();\n    },\n    \n    // 当前页改变\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.fetchQuestionList();\n    },\n    \n    // 打开添加题目对话框\n    openAddDialog() {\n      this.isEdit = false;\n      this.dialogTitle = '添加题目';\n      this.questionForm = {\n        id: null,\n        question: '',\n        answers: [\n          { text: '', correct: false },\n          { text: '', correct: false },\n          { text: '', correct: false },\n          { text: '', correct: false }\n        ]\n      };\n      this.correctAnswerIndex = -1;\n      this.dialogVisible = true;\n      // 重置表单验证\n      if (this.$refs.questionForm) {\n        this.$nextTick(() => {\n          this.$refs.questionForm.clearValidate();\n        });\n      }\n    },\n    \n    // 编辑题目\n    editQuestion(row) {\n      this.isEdit = true;\n      this.dialogTitle = '编辑题目';\n      // 获取题目详情\n      this.$axios.get(`/question/detail/${row.id}`)\n        .then(response => {\n          const res = response.data;\n          if (res.code === 1) {\n            this.questionForm = {\n              id: res.data.id,\n              question: res.data.question,\n              answers: [...res.data.answers] // 确保是新数组\n            };\n            \n            // 找到正确答案的索引\n            this.correctAnswerIndex = this.questionForm.answers.findIndex(a => a.correct);\n            \n            // 确保至少有4个选项\n            while (this.questionForm.answers.length < 4) {\n              this.questionForm.answers.push({ text: '', correct: false });\n            }\n            \n            this.dialogVisible = true;\n          } else {\n            this.$message.error(res.msg || '获取题目详情失败');\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          this.$message.error('获取题目详情失败');\n        });\n    },\n    \n    // 添加选项\n    addOption() {\n      this.questionForm.answers.push({ text: '', correct: false });\n    },\n    \n    // 移除选项\n    removeOption(index) {\n      this.questionForm.answers.splice(index, 1);\n    },\n    \n    // 提交题目\n    submitQuestion() {\n      this.$refs.questionForm.validate(valid => {\n        if (valid) {\n          // 验证是否选择了正确答案\n          if (this.correctAnswerIndex < 0) {\n            this.$message.warning('请选择一个正确答案');\n            return;\n          }\n          \n          // 根据correctAnswerIndex设置correct属性\n          this.questionForm.answers.forEach((a, i) => {\n            a.correct = (i === this.correctAnswerIndex);\n          });\n          \n          // 过滤掉空选项\n          const filteredAnswers = this.questionForm.answers.filter(a => a.text.trim() !== '');\n          \n          // 检查正确答案是否在过滤后的选项中\n          const correctInFiltered = filteredAnswers.some(a => a.correct);\n          if (!correctInFiltered) {\n            this.$message.warning('正确答案的选项内容不能为空');\n            return;\n          }\n          \n          this.questionForm.answers = filteredAnswers;\n          \n          // 验证至少有两个选项\n          if (this.questionForm.answers.length < 2) {\n            this.$message.warning('至少需要两个选项');\n            return;\n          }\n          \n          this.submitLoading = true;\n          const url = this.isEdit ? '/question/update' : '/question/add';\n          this.$axios.post(url, this.questionForm)\n            .then(response => {\n              const res = response.data;\n              if (res.code === 1) {\n                this.$message.success(this.isEdit ? '修改题目成功' : '添加题目成功');\n                this.dialogVisible = false;\n                this.fetchQuestionList();\n              } else {\n                this.$message.error(res.msg || (this.isEdit ? '修改题目失败' : '添加题目失败'));\n              }\n              this.submitLoading = false;\n            })\n            .catch(error => {\n              console.error(error);\n              this.$message.error(this.isEdit ? '修改题目失败' : '添加题目失败');\n              this.submitLoading = false;\n            });\n        }\n      });\n    },\n    \n    // 确认删除题目\n    confirmDelete(row) {\n      this.$confirm('确定要删除该题目吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteQuestion(row.id);\n      }).catch(() => {});\n    },\n    \n    // 删除题目\n    deleteQuestion(id) {\n      this.$axios.delete(`/question/delete/${id}`)\n        .then(response => {\n          const res = response.data;\n          if (res.code === 1) {\n            this.$message.success('删除题目成功');\n            this.fetchQuestionList();\n          } else {\n            this.$message.error(res.msg || '删除题目失败');\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          this.$message.error('删除题目失败');\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.question-container {\n  padding: 20px;\n}\n\n.page-header {\n  margin-bottom: 20px;\n}\n\n.search-form {\n  margin-bottom: 20px;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n\n.option-item {\n  margin-bottom: 15px;\n}\n\n.option-row {\n  display: flex;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Question.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Question.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Question.vue?vue&type=template&id=57b86a95&scoped=true\"\nimport script from \"./Question.vue?vue&type=script&lang=js\"\nexport * from \"./Question.vue?vue&type=script&lang=js\"\nimport style0 from \"./Question.vue?vue&type=style&index=0&id=57b86a95&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57b86a95\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}